# tiktok-effects-props-2024

These TikTok quiz filters adapt the [2024 Voter Guide prop quizzes](https://calmatters.org/california-voter-guide-2024/propositions/) as augmented reality effects, commonly referred to as "filters." Users tilt their heads to answer yes/no/unsure to 1-4 questions to determine their stance on the ballot propositions.

CalMatters published a demo on [how to use the Prop. 33 quiz on Tiktok](https://www.tiktok.com/@calmatters/video/7429809720568925483).

The quizzes are accessible under the :magic_wand: effects tab on the [CalMatters TikTok profile page](https://www.tiktok.com/@calmatters) (only viewable on the TikTok mobile apps):

![CalMatters TikTok profile page](tiktok-profile-page.png)

The web versions of the proposition quizzes are available at each one's [voter guide webpage](https://calmatters.org/california-voter-guide-2024/propositions/).

# Development

The quiz effect is developed as a template project using the `./effect-template` project files. Any changes to the core functionality should be made to the template project.

The specific quiz effect for each proposition is generated by the `./generate_prop_quizzes.py` script. This script duplicates the `./effect-template/` template directory and sets the number of questions with the corresponding values for each question's options. The generated project directories use blank questions and result card assets, which can be replaced manually or by running the `./set_assets.py` script.

For example, if I needed to adjust the position of a specific [Scene Object](https://effecthouse.tiktok.com/learn/guides/technical-guides/objects/scene/scene-object):

1. Launch `./effect-template/effect.ehproj` in Effect House
2. Adjust the relevant object's Position coordinates
3. Save changes to project and close Effect House
4. Delete any existing prop effect project directories, except for [Proposition 34](prop34/) (see note below)
5. Run the `./generate_prop_quizzes.py` script to regenerate the prop quizzes
6. Run the `./set_assets.py` script to replace the blank assets the corresponding prop's assets
7. If publishing the effects or an update, then open each project and follow [deploy instructions](#deployment)

This workflow allows for rapid development without manually editing each effect individually. 

Note: Prop. 34 is an exception due to its longer intro card sequence. Changes to this effect should be made to the individual project to avoid needing to rebuild the intro sequence for every change to the base template. 

## Dependencies

- Python 3.11.7
    - Custom scripts to generate the TikTok effects from the base template and set assets
- Effect House 4.6.2
    - [Effect House](https://effecthouse.tiktok.com/download), TikTok's effect development platform. Quiz effects published using 4.6.2 and future versions may deprecate required features. ([Download previous Effect House versions.](https://effecthouse.tiktok.com/download/previous-versions/))

## File structure

### `./effect-template/`
This is the base template that each effect is built on. Any changes to the core functionality of the effect should be made to this project followed by duplicating the directory for each proposition using `generate_prop_quizzes.py`.

### `./assets/propNUMBER/`
This directory has a subdirectory for each proposition's assets. These assets include the title card, question cards, options, and result cards. Changes to the prop quiz assets should be made in this directory followed by running `set_assets.py` to copy over into the corresponding prop quiz project directories.

### `./propNUMBER/`
Each proposition has a corresponding project directory where the effect can be opened and updated as needed. Prop. 32 and Prop. 34 are the only effects that require changes after `generate_prop_quizzes.py` and `set_assets.py` are run.

### `./generate_prop_quizzes.py`
Creates a duplicate of the `./effect-template/` project template for each prop, except Prop. 34, and sets the number of questions with the corresponding values for each question's options.

### `./set_assets.py`
Copies and overwrites the asset files in each `./propNUMBER/` effect project directory using the version in the `./assets/` directory.

### `./set_icons.py`
Copies the prop quiz icons for each effect into their corresponding icon directory.

### `./get_assets.py`
Copies and overwrites the asset files for each corresponding effect into the `./assets/` directory.

# Deployment

TikTok moderates each submitted effect submitted for content and performance. It takes anywhere from two hours to three days to go live following submission. Submissions are made in Effect House, so each effect needs to be opened individually for submission.

1. Open the effect in Effect House
2. Select the `Submit` button
3. If the `What would you like to do?` menu appears, then select the appropriate option
4. Enter the [effect details](#effect-details)
5. Select `Next`
6. Review the details and submit for approval

## Effect details
| Field                                              | Value                                                                                                            |
| -------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| Effect name (25 characters total)                  | Prop X by CalMatters                                                                                             |
| Default sound (optional)                           | None                                                                                                             |
| Hint (optional)                                    | Tilt head                                                                                                        |
| Category (optional)                                | Interactive                                                                                                      |
| Tags (optional, up to 5, each tag has 30-char max) | California ballot propositions, California general election, California politics, 2024 election, Voter education |
| Demo video (optional)                              | Not submitting demo                                                                                              |

# Credits

[Full credits for the CalMatters 2024 Voter Guide](https://calmatters.org/california-voter-guide-2024/#h-credits)

[CalMatters](https://calmatters.org/) is a nonpartisan and nonprofit news organization bringing Californians stories that probe, explain and explore solutions to quality of life issues while holding our leaders accountable. [Learn more about CalMatters](https://calmatters.org/about/)
